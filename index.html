<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>HDB-on-HDP by dbbaskette</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">HDB-on-HDP</h1>
      <h2 class="project-tagline">Pivotal HDB on Hortonworks HDP Sandbox</h2>
      <a href="https://github.com/dbbaskette/hdb-on-hdp" class="btn">View on GitHub</a>
      <a href="https://github.com/dbbaskette/hdb-on-hdp/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dbbaskette/hdb-on-hdp/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="pivotal-hdb-on-hortonworks-hdp-sandbox" class="anchor" href="#pivotal-hdb-on-hortonworks-hdp-sandbox" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pivotal HDB on Hortonworks HDP Sandbox</h1>

<p><img src="https://raw.githubusercontent.com/dbbaskette/hdb-on-hdp/gh-pages/images/hdb.jpeg?token=ACbVkUI1WnnUpyJAOIAZbDH4AHJsBj63ks5WM91-wA%3D%3D" width="300"></p>

<h4>
<a id="packer-based-build-process-for-adding-pivotal-hdb-to-the-hortonworks-hdp-sandbox" class="anchor" href="#packer-based-build-process-for-adding-pivotal-hdb-to-the-hortonworks-hdp-sandbox" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Packer-Based Build Process for adding Pivotal HDB to the Hortonworks HDP Sandbox</h4>

<p><strong>Requirements:</strong>  </p>

<ul>
<li>Packer<br>
</li>
<li>VMware Fusion</li>
<li>Hortonworks HDP Sandbox 2.4</li>
<li>Pivotal HDB Package</li>
<li>Pivotal HDB Ambari Plugin Package</li>
<li>Apache MADlib for HDB Package</li>
</ul>

<p>This release only works for the vmware version.</p>

<ul>
<li>Download the VMWARE version of Sandbox 2.4 in to the main hdp-on-hpd directory. Leave it in its native downloaded format.</li>
<li>Place Pivotal HDB and Ambari Plugin packages in ./bins Directory. Leave them in their native *.tar.gz format.</li>
<li>Place MADlib Package in ./plugins.   Leave in Native *.tar.gz format</li>
<li>In build.sh, verify the value for the following variable: SANDBOX_BASENAME,OVFTOOL_BIN,VMRUN_BIN.   If needed, change them to the appropriate values, so that the first process of the builder will run properly.</li>
<li>Run ./build.sh vmware   (it's completely hands-off from here)</li>
<li>Output will be a Zip file containing the VM.    Move and unzip where you want to store the VM.  It does not require an import to work.</li>
</ul>

<p>Build Process: (Steps that are performed)</p>

<ul>
<li>If required, OVA will be converted to vmx format</li>
<li>VM is booted, Root password is changed, and then VM is shutdown.</li>
<li>VM is cloned.</li>
<li>HDB Repos are configured and plugin is installed</li>
<li>hdfs-site, core-site, and yarn-site are configured with appropriate values via Ambari API and then services are restarted.</li>
<li>HDB and PXF are installed via API and parameters are set.</li>
<li>HDB and PXF are started to complete installation</li>
<li>Apache MADlib is installed.</li>
<li>Tutorial GIT is cloned</li>
<li>Data files are moved into HDFS and a table is created in Hive</li>
<li>VM is cleaned up prior to shutdown</li>
<li>VM is shutdown and then compressed to a zip file.</li>
</ul>

<p>This release will automatically download the HDB Tutorials (which are not completed).   This process also will load data into Hive for immediate query by PXF</p>

<ul>
<li>Boot up the VM</li>
<li>login to Ambari at :8080 with admin/admin</li>
<li>start HDB and PXF</li>
<li>login to the command line as gpadmin (gpadmin/gpadmin)</li>
<li>Type:  psql -d template</li>
<li>from the psql shell type: select * from hcatalog.faa.otp limit 10;</li>
</ul>

<p>This will directly query the Hive table leveraging the metadata from HCATALOG</p>

<p>logins:</p>

<p>VM:
root/hawq2016
gpadmin/gpadmin
Ambari:
admin/admin</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dbbaskette/hdb-on-hdp">HDB-on-HDP</a> is maintained by <a href="https://github.com/dbbaskette">dbbaskette</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
